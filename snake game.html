<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Snake Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* General Styling to match your GitHub Profile aesthetic */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            background-color: #21262d; /* GitHub Dark Theme Background */
            color: #c9d1d9; /* GitHub Text Color */
            font-family: 'Press Start 2P', monospace;
            user-select: none;
        }
        #game-board {
            border: 4px solid #10B981; /* Green border matching your pixel box */
            background-color: #0d1117; /* Even darker inner background */
            display: grid;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.5); /* Glowing effect */
        }
        .snake, .food {
            /* These tiles are small to create the pixel effect */
            border: 1px solid rgba(0,0,0,0.1); 
        }
        .snake {
            background-color: #007ACC; /* Blue snake segment */
        }
        .food {
            background-color: #FF3366; /* Pink/Red food item */
        }
        #score-board {
            margin-bottom: 20px;
            font-size: 16px;
            color: #10B981;
        }
        #message {
            margin-top: 15px;
            font-size: 14px;
            color: #FF3366;
            display: none;
        }
        button {
            background-color: #10B981;
            color: #0d1117;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            font-family: 'Press Start 2P', monospace;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #0c8a66;
        }
    </style>
</head>
<body>
    <div id="score-board">Score: 0</div>
    <div id="game-board"></div>
    <div id="message">Press W A S D or Arrow Keys to start!</div>
    <button id="start-button" style="display: none;">Play Again</button>

    <script>
        // Game Settings
        const BOARD_SIZE = 20;
        const TILE_SIZE = 20; // in pixels
        let gameSpeed = 150; // initial speed in milliseconds
        
        // Game State
        let snake = [{x: 10, y: 10}];
        let food = generateFood();
        let direction = {x: 0, y: 0};
        let isGameOver = false;
        let isGamePaused = true;
        let score = 0;
        let gameLoopId;

        const gameBoard = document.getElementById('game-board');
        const scoreBoard = document.getElementById('score-board');
        const startButton = document.getElementById('start-button');
        const message = document.getElementById('message');

        function setupBoard() {
            gameBoard.style.width = `${BOARD_SIZE * TILE_SIZE}px`;
            gameBoard.style.height = `${BOARD_SIZE * TILE_SIZE}px`;
            gameBoard.style.gridTemplateColumns = `repeat(${BOARD_SIZE}, ${TILE_SIZE}px)`;
            gameBoard.style.gridTemplateRows = `repeat(${BOARD_SIZE}, ${TILE_SIZE}px)`;
        }
        setupBoard();

        function generateFood() {
            let newFood;
            do {
                newFood = {
                    x: Math.floor(Math.random() * BOARD_SIZE) + 1,
                    y: Math.floor(Math.random() * BOARD_SIZE) + 1
                };
            } while (snake.some(segment => segment.x === newFood.x && segment.y === newFood.y));
            return newFood;
        }

        function draw() {
            gameBoard.innerHTML = '';
            
            // Draw Snake
            snake.forEach(segment => {
                const snakeElement = document.createElement('div');
                snakeElement.style.gridRowStart = segment.y;
                snakeElement.style.gridColumnStart = segment.x;
                snakeElement.classList.add('snake');
                gameBoard.appendChild(snakeElement);
            });

            // Draw Food
            const foodElement = document.createElement('div');
            foodElement.style.gridRowStart = food.y;
            foodElement.style.gridColumnStart = food.x;
            foodElement.classList.add('food');
            gameBoard.appendChild(foodElement);
            
            scoreBoard.textContent = `Score: ${score}`;
        }

        function update() {
            if (isGameOver || isGamePaused) return;

            const newHead = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};

            // Check Collision with Walls
            if (newHead.x < 1 || newHead.x > BOARD_SIZE || newHead.y < 1 || newHead.y > BOARD_SIZE) {
                endGame();
                return;
            }

            // Check Collision with Self
            if (snake.slice(1).some(segment => segment.x === newHead.x && segment.y === newHead.y)) {
                endGame();
                return;
            }

            // Move Snake
            snake.unshift(newHead);

            // Check for Food
            if (newHead.x === food.x && newHead.y === food.y) {
                score++;
                food = generateFood();
                // Speed up the game slightly every time food is eaten
                clearInterval(gameLoopId);
                gameSpeed = Math.max(50, gameSpeed - 3); // Capped at 50ms
                gameLoopId = setInterval(update, gameSpeed);
            } else {
                snake.pop(); // Remove tail unless food was eaten
            }

            draw();
        }

        function handleKeypress(e) {
            if (isGameOver) return;
            
            const movingHorizontally = direction.x !== 0;
            const movingVertically = direction.y !== 0;

            let directionChanged = false;

            switch (e.key) {
                case 'ArrowUp':
                case 'w':
                    if (movingVertically) break;
                    direction = {x: 0, y: -1};
                    directionChanged = true;
                    break;
                case 'ArrowDown':
                case 's':
                    if (movingVertically) break;
                    direction = {x: 0, y: 1};
                    directionChanged = true;
                    break;
                case 'ArrowLeft':
                case 'a':
                    if (movingHorizontally) break;
                    direction = {x: -1, y: 0};
                    directionChanged = true;
                    break;
                case 'ArrowRight':
                case 'd':
                    if (movingHorizontally) break;
                    direction = {x: 1, y: 0};
                    directionChanged = true;
                    break;
            }
            
            if (directionChanged && isGamePaused) {
                isGamePaused = false;
                message.style.display = 'none';
            }
        }

        function endGame() {
            isGameOver = true;
            clearInterval(gameLoopId);
            message.textContent = `GAME OVER! Final Score: ${score}.`;
            message.style.display = 'block';
            startButton.style.display = 'block';
        }

        function startGame() {
            snake = [{x: 10, y: 10}];
            food = generateFood();
            direction = {x: 0, y: 0};
            isGameOver = false;
            isGamePaused = true; // Wait for first movement input
            score = 0;
            gameSpeed = 150;
            
            startButton.style.display = 'none';
            message.textContent = `Press W A S D or Arrow Keys to start!`;
            message.style.display = 'block';

            clearInterval(gameLoopId);
            gameLoopId = setInterval(update, gameSpeed);
            draw();
        }
        
        startButton.addEventListener('click', startGame);
        document.addEventListener('keydown', handleKeypress);
        draw(); // Initial draw before start
        message.style.display = 'block';
    </script>
</body>
</html>
